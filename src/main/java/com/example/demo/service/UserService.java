package com.example.demo.service;import com.example.demo.entity.User;import com.example.demo.repository.UserRepository;import com.example.demo.util.UUIDGenerator;import org.hibernate.mapping.Map;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import org.springframework.data.redis.core.RedisTemplate;import java.util.HashMap;import java.util.concurrent.TimeUnit;@Servicepublic class UserService {    @Autowired    UserRepository userRepository;    @Autowired    RedisTemplate redisTemplate;    public String register(String account,String password){        if(userRepository.findByUserAccount(account)!=null)return "账号已经存在";        User user = new User();        user.setUserAccount(account);        user.setUserPassword(password);        userRepository.save(user);        return "注册成功";    }    public Object login(String account,String password){        if(userRepository.findByUserAccountAndUserPassword(account,password)==null)return "用户名或密码错误";        HashMap<String,Object> res = new HashMap<>();        String token = UUIDGenerator.generateUUID();        redisTemplate.opsForValue().set(token,account,604800, TimeUnit.SECONDS);        res.put("token",token);        return res;    }    public boolean checkToken(String token){        return redisTemplate.opsForValue().get(token) != null;    }}